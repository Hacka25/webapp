# Project Overview

Based ONLY on the content of the provided source files:

1. **Introduction:** This project is an example Kubernetes (K8s) deployment for a web application running in Google Kubernetes Engine (GKE). The deployment consists of frontend, backend services, and a MySQL database managed using Terraform infrastructure as code.

2. **Detailed Sections:**

   ## GKE Cluster
    - **Purpose**: Manages the creation and configuration of a Google Kubernetes Engine cluster.
      - **Key Components**: `google_container_cluster.primary` resource in `gke.tf`.
        * `name`, `location`, `remove_default_node_pool`, `initial_node_count`.

    - **Initial Node Pool Configuration**: Defines the initial number of nodes and their machine type for the GKE cluster.
      - **Key Components**: `google_container_node_pool.primary_nodes` resource in `gke.tf`.
        * `name`, `cluster`, `location`, `node_count`, `machine_type`.

   ## MySQL Database (Google Cloud SQL)
    - **Purpose**: Creates and configures a Google Cloud SQL instance for the application to use as its data storage.
      - **Key Components**: `google_sql_database_instance` resource in `sql.tf`.
        * `name`, `database_version`, `region`, `settings`.
    - **Database User Management**: Creates a user with defined username and password for the Google Cloud SQL instance.
      - **Key Components**: `google_sql_user` resource in `sql.tf`.
        * `name`, `instance`, `password`.

   ## Kubernetes Deployments
    - **Purpose**: Manages the deployment of Docker containers for the web application's frontend and backend services using K8s manifests.
      - **Key Components**: `deployment.yaml`, `backend-deployment.yaml`, `frontend-deployment.yaml`.
        * `apiVersion`, `kind`, `metadata`, `spec`, `replicas`, `selector`, `template`, `containers`, `ports`, `env`, `volumeMounts`, `volumes`, and their respective properties.

   ## Kubernetes Services
    - **Purpose**: Defines services for the web application's frontend, backend, and load balancing using K8s manifests.
      - **Key Components**: `service.yaml`, `backend-service.yaml`, `frontend-service.yaml`.
        * `apiVersion`, `kind`, `metadata`, `name`, `spec`, `type`, `selector`, `ports`, and their respective properties.

3. **Mermaid Diagrams:**
   ```mermaid
   flowchart TD;
    SubGraph(GKE Cluster)
      Cluster["Cluster"] --> |Create| NodePool["Node Pool"];
      Note right of NodePool("Initial nodes: 1\nMachine type: e2-medium");
    End
    SubGraph(MySQL Database)
      DB_Instance["Database Instance"] --> |Create| User["User"];
    End
    Frontend["Frontend Service"] --> |Deploy| Frontend_Deployment["Deployment"];
    Backend["Backend Service"] --> |Deploy| Backend_Deployment["Deployment"];
   ```

4. **Tables:**

   | Component                  | Description                                                                          |
   |----------------------------|--------------------------------------------------------------------------------------|
   | GKE Cluster                | Manages Google Kubernetes Engine cluster creation and configuration.               |
   | Node Pool                  | Initial number of nodes and their machine type for the GKE cluster.              |
   | MySQL Database             | Manages Google Cloud SQL instance creation, configuration, and user management.   |
   | Deployment (Frontend/Backend)| Deploys Docker containers for frontend/backend services using K8s manifests.     |
   | Service (Frontend/Backend)  | Defines services for load balancing and communication between services.        |

5. **Environment Variables:** The frontend and backend containers have environment variables set for the MySQL connection details, including `DB_HOST`, `DB_USER`, and `DB_PASSWORD`. These values are either hardcoded or obtained from a Kubernetes secret called `db-credentials`.

_Generated by P4CodexIQ

## Architecture Diagram

```mermaid
graph TD

    subgraph Application
        Deployment("k8s/deployment.yaml")
        Service("k8s/service.yaml")
        Backend_Deployment("k8s/backend-deployment.yaml")
        Frontend_Deployment("k8s/frontend-deployment.yaml")
        Backend_Service("k8s/backend-service.yaml")
        Frontend_Service("k8s/frontend-service.yaml")
    end

    subgraph Google Cloud Resources
        GKE("google_container_cluster.primary")
        NodePool("google_container_node_pool.primary_nodes")
        DBInstance("google_sql_database_instance.mysql_instance")
        DBUser("google_sql_user.users")
    end

    subgraph Secrets and Configs
        Credentials("k8s/deployment.yaml:db-credentials")
        InstanceCreds("k8s/deployment.yaml:cloudsql-instance-credentials")
        ServiceAccountJSON("gcr.io/cloudsql-docker/gce-proxy:1.33.0")
    end

    GKE --> NodePool
    NodePool --> [2] Container
    Container -.-> Deployment
    Container -.-> Service
    Container -.-> Backend_Deployment
    Container -.-> Backend_Service
    Container -.-> Frontend_Deployment
    Container -.-> Frontend_Service

    DBInstance --> DBUser
    DBUser --> Deployment
    DBUser --> Backend_Deployment

    Credentials --> Deployment
    Credentials --> Backend_Deployment
    InstanceCreds --> Deployment
    InstanceCreds --> Backend_Deployment
    ServiceAccountJSON --> Container
```

_Generated by P4CodexIQ