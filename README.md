# Project Overview

Based ONLY on the content of the [RELEVANT_SOURCE_FILES]:

1. **Introduction:** This project is a containerized web application deployed on Google Kubernetes Engine (GKE). The application consists of frontend and backend services, which communicate with a MySQL database instance hosted on Google Cloud SQL. This readme provides an overview of the architecture, key components, and configuration details for the overall project.

2. **Detailed Sections:**

    ## Google Kubernetes Engine (GKE) Cluster
        - The GKE cluster is created using Terraform with the name specified in `variables.tf`.
        - A default node pool of size 1 is defined, and additional nodes are added as per the number configured in `gke.tf`.
        - The cluster's location (region) is set to `us-central1` by default or as provided in the `variables.tf` file.

    ## Google Cloud SQL Database Instance
        - A MySQL database instance with the name "mysql-db" and version 8.0 is created using Terraform in the `sql.tf` file.
        - The instance is configured to use the default network for the project and a "db-f1-micro" tier.
        - A user (admin) is created with the specified password, which can be accessed via environment variables in the application containers.

    ## Kubernetes Deployments & Services
        - The frontend and backend services are defined as deployments in separate YAML files (`k8s/frontend-deployment.yaml`, `k8s/backend-deployment.yaml`).
            * Each deployment creates a pod with the specified container image (replace `YOUR_PROJECT_ID` accordingly) and required ports for communication.
            * Both deployments include a cloudsql-proxy container to manage communication with the Google Cloud SQL instance.
        - Services are defined in separate YAML files (`k8s/service.yaml`, `k8s/frontend-service.yaml`, `k8s/backend-service.yaml`) to expose the corresponding applications to external traffic.
            * The frontend and backend services are load-balanced, while the backend service can be made headless or use a ClusterIP if needed for service discovery.

3. **Mermaid Diagrams**

    ```mermaid
    flowchart TD
        App["Frontend"] --> DBProxy["CloudSQL Proxy"]
        App["Backend"] --> DBProxy["CloudSQL Proxy"]
        DBProxy["CloudSQL Proxy"] --> DB["MySQL Database"]
    ```

4. **Source Citations:**
   - `variables.tf:2-8` for GKE cluster name and default values
   - `gke.tf:2-6,9-10` for Google Kubernetes Engine configuration
   - `sql.tf:3-11` for MySQL database instance creation and user management
   - `k8s/deployment.yaml`, `k8s/service.yaml`, `k8s/frontend-deployment.yaml`, `k8s/backend-deployment.yaml`, `k8s/frontend-service.yaml`, `k8s/backend-service.yaml` for Kubernetes deployment and service configurations

5. **Conclusion/Summary:** This project showcases the deployment of a web application with frontend and backend services on GKE, using Google Cloud SQL as the database. The project demonstrates the configuration and setup process for these components, providing a strong foundation for developing cloud-native applications in this environment.

_Generated by P4CodexIQ

## Architecture Diagram

```mermaid
graph TD
    subgraph Infrastructure
        A[Google Cloud Project]
        B[GKE Cluster]("${google_container_cluster.primary.name}")
        C[MySQL Instance]("${google_sql_database_instance.mysql_instance.connection_name}")
    end

    subgraph Terraform Files
        D[variables.tf]
        E[output.tf]
        F[sql.tf]
        G[gke.tf]
        H[main.tf]
    end

    A --> B
    A --> C
    B --> F
    F --> google_sql_user
    F --> google_sql_database_instance
    G --> B
    G --> H
    H --> E
    D --> H
    E --> A.gke_cluster_name
    E --> A.sql_instance_connection_name

    subgraph Kubernetes Manifests
        I["k8s/deployment.yaml"]("Deployment: web-app")
        J["k8s/service.yaml"]("Service: web-app")
        K["k8s/backend-service.yaml"]("Service: backend")
        L["k8s/frontend-deployment.yaml"]("Deployment: frontend")
        M["k8s/backend-deployment.yaml"]("Deployment: backend")
        N["k8s/frontend-service.yaml"]("Service: frontend")
    end

    I --> J
    K --> B
    L --> B
    M --> B
    N --> L

    B --> I.image
    B --> I.env.DB_HOST
    B --> I.env.DB_USER
    B --> I.env.DB_PASSWORD
    B --> I.envFrom.secretKeyRef.name
    B --> M.image
    B --> M.env.DB_HOST
    B --> M.env.DB_USER
    B --> M.env.DB_PASSWORD
    B --> M.envFrom.secretKeyRef.name
```

_Generated by P4CodexIQ